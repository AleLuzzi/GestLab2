<SelectableLabel>:
    canvas.before:
        Color:
            rgba: (.0, 0.9, .1, .3) if self.selected else (0, 0, 0, 1)
        Rectangle:
            pos: self.pos
            size: self.size

<IngressoMerce>:
    BoxLayout:
        fornit: fornit
        orientation: 'horizontal'
        TabbedPanel:
            do_default_tab: False
            tab_width: 300
            TabbedPanelItem:
                text: 'INTESTAZIONE'
                BoxLayout:
                    canvas.before:
                        Color:
                            rgba: 211,211,211,.7
                        Rectangle:
                            pos: self.pos
                            size: self.size
                    orientation: 'vertical'
                    size_hint: .5,.5
                    Label:
                        canvas.before:
                            Color:
                                rgba: 0,0,1,1
                            Rectangle:
                                pos: self.pos
                                size: self.size
                        text: 'Progressivo Lotto Ingresso'
                    Label:
                        text: str(root.prog_lotto_acq)
                    Label:
                        canvas.before:
                            Color:
                                rgba: 0,0,1,1
                            Rectangle:
                                pos: self.pos
                                size: self.size
                        text: 'Data ingresso merce'
                    Label:
                        text: str(root.oggi.strftime('%d/%m/%y'))
                    Label:
                        canvas.before:
                            Color:
                                rgba: 0,0,1,1
                            Rectangle:
                                pos: self.pos
                                size: self.size
                        text: 'Numero ddt/Fattura'
                    TextInput:
                        id: txtinp
                        text: ''
                        input_type: 'number'
                    Label:
                        canvas.before:
                            Color:
                                rgba: 0,0,1,1
                            Rectangle:
                                pos: self.pos
                                size: self.size
                        text: 'Fornitore'
                    Spinner:
                        id: fornit
                        text: 'Fornitori'
                        values: root.lista_fornitori
            TabbedPanelItem:
                text: 'CORPO DOCUMENTO'
                BoxLayout:
                    orientation:'horizontal'
                    AnchorLayout:
                        anchor_x: 'center'
                        anchor_y: 'top'
                        BoxLayout:
                            ToggleButton:
                                text: 'AGNELLO'
                                group: 'merceologia'
                                size_hint: .25,.1
                                pos_hint: {"top":1}
                                on_press: rv.data=root.aggiorna_rv('12')
                            ToggleButton:
                                text: 'BOVINO'
                                group: 'merceologia'
                                size_hint: .25,.1
                                pos_hint: {"top":1}
                                on_press: rv.data=root.aggiorna_rv('10')
                            ToggleButton:
                                text: 'VITELLO'
                                group: 'merceologia'
                                size_hint: .25,.1
                                pos_hint: {"top":1}
                                on_press: rv.data=root.aggiorna_rv('13')
                            ToggleButton:
                                text: 'SUINO'
                                group: 'merceologia'
                                size_hint: .25,.1
                                pos_hint: {'top':1}
                                on_press: rv.data=root.aggiorna_rv('11')
                        BoxLayout:
                            RV:
                                id: rv
                                pos_hint: {'top': 0.9}
                                viewclass: 'SelectableLabel'
                                SelectableRecycleBoxLayout:
                                    default_size: None, dp(56)
                                    default_size_hint: 1, None
                                    size_hint_y: None
                                    height: self.minimum_height
                                    orientation: 'vertical'
                    FloatLayout:
                        BoxLayout:
                            orientation:'vertical'
                            pos_hint:{'top':1, 'right':1}
                            size_hint: 1,0.1
                            Label:
                                text:'Quantit√† richiesta'
                        BoxLayout:
                            orientation:'horizontal'
                            pos_hint:{'top':0.9,'right':1}
                            size_hint: 1,0.1
                            ToggleButton:
                                text: 'KG'
                                group: 'peso'
                                state: 'down'
                            ToggleButton:
                                text: 'PZ'
                                group:'peso'
                        BoxLayout:
                            orientation:'vertical'
                            pos_hint:{'top':0.8,'right':1}
                            size_hint:1,0.2
                            Slider:
                                id: slider
                                min: 1
                                max: 30
                                step: 0.5
                                value: 0
                            Label:
                                text:str(slider.value)
                        BoxLayout:
                            orientation:'horizontal'
                            pos_hint:{'top':0.6,'right':1}
                            size_hint:1,0.1
                            Button:
                                text:'0,5'
                                on_press:slider.value=0.5
                            Button:
                                text:'1'
                                on_press:slider.value=1
                            Button:
                                text:'1,5'
                                on_press:slider.value=1.5
                            Button:
                                text:'2'
                                on_press:slider.value=2
                        BoxLayout:
                            orientation:'vertical'
                            pos_hint:{'top':0.5,'right':1}
                            size_hint:1,0.5
                            Button:
                                text:'CONFERMA'
                                size_hint:1,.7
                                on_press: root.confermato(rv.data)
                            Button:
                                text: 'INDIETRO'
                                size_hint:1,.3
                                on_press: root.indietro()
            TabbedPanelItem:
                text:'RIEPILOGO'
                RV:
                    id: rv_selezionato
                    pos_hint: {'top': 1}
                    viewclass: 'Label'
                    SelectableRecycleBoxLayout:
                        default_size: None, dp(56)
                        default_size_hint: 1, None
                        size_hint_y: None
                        height: self.minimum_height
                        orientation: 'vertical'
